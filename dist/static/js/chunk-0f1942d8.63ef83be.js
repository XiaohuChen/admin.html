(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f1942d8"],{"3aff":function(e,t,i){},4381:function(e,t,i){"use strict";i("40c5"),i("23cc");var n=i("4360"),a={inserted:function(e,t,i){var a=t.value,o=n["a"].getters&&n["a"].getters.roles;if(!(a&&a instanceof Array&&a.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");var l=a;if("*"!=o){var r=o.some((function(e){return l.includes(e)}));r||e.parentNode&&e.parentNode.removeChild(e)}}},o=function(e){e.directive("permission",a)};window.Vue&&(window["permission"]=a,Vue.use(o)),a.install=o;t["a"]=a},"5a68":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["/plan/add"],expression:"['/plan/add']"}],staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[i("i",{staticClass:"el-icon-plus"}),e._v("  添加等级\n    ")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[i("el-table-column",{attrs:{prop:"Id",label:"ID",align:"center",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"Level",align:"center",label:"等级"}}),e._v(" "),i("el-table-column",{attrs:{prop:"Name",align:"center",label:"等级名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"ContinueTime",align:"center",label:"连续购买轮数"}}),e._v(" "),i("el-table-column",{attrs:{prop:"Products",align:"center",label:"连续购买产品"}}),e._v(" "),i("el-table-column",{directives:[{name:"permission",rawName:"v-permission",value:["/plan/edit"],expression:"['/plan/edit']"}],attrs:{label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("span",{directives:[{name:"permission",rawName:"v-permission",value:["/plan/edit"],expression:"['/plan/edit']"}]},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return e.edit(t.row.Id,t.row.ProductId)}}},[e._v("\n              编辑\n            ")])],1)])]}}])})],1),e._v(" "),i("el-dialog",{attrs:{title:"编辑等级",visible:e.editLevelVisible},on:{"update:visible":function(t){e.editLevelVisible=t}}},[i("el-form",[i("el-form-item",{attrs:{label:"等级名称","label-width":"70px"}},[i("el-input",{model:{value:e.editForm.Name,callback:function(t){e.$set(e.editForm,"Name",t)},expression:"editForm.Name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"连续购买轮数","label-width":"70px"}},[i("el-input",{attrs:{type:"number"},model:{value:e.editForm.ContinueTime,callback:function(t){e.$set(e.editForm,"ContinueTime",t)},expression:"editForm.ContinueTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"连续购买商品列表"}},[i("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.ProductIds,callback:function(t){e.ProductIds=t},expression:"ProductIds"}},e._l(e.ProductList,(function(e){return i("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})})),1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"添加等级",visible:e.addLevelVisible},on:{"update:visible":function(t){e.addLevelVisible=t}}},[i("el-form",[i("el-form-item",{attrs:{label:"等级名称","label-width":"70px"}},[i("el-input",{model:{value:e.addForm.Name,callback:function(t){e.$set(e.addForm,"Name",t)},expression:"addForm.Name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"连续购买轮数","label-width":"70px"}},[i("el-input",{attrs:{type:"number"},model:{value:e.addForm.ContinueTime,callback:function(t){e.$set(e.addForm,"ContinueTime",t)},expression:"addForm.ContinueTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"连续购买商品列表"}},[i("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.ProductIds,callback:function(t){e.ProductIds=t},expression:"ProductIds"}},e._l(e.ProductList,(function(e){return i("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})})),1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1)],1)},a=[],o=(i("aede"),i("3aff"),i("c7a8")),l=i("c4c8"),r=i("6724"),s=i("4381"),d={name:"RuleList",directives:{waves:r["a"],permission:s["a"]},data:function(){return{tableData:[],editLevelVisible:!1,addLevelVisible:!1,listLoading:!0,ProductList:[],editForm:{Id:"",Name:"",ContinueTime:""},addForm:{ContinueTime:"",Name:""},ProductIds:[]}},created:function(){this.init()},methods:{init:function(){var e=this;this.listLoading=!0,Object(o["d"])({}).then((function(t){e.tableData=t.data,setTimeout((function(){e.listLoading=!1}),300)}))},edit:function(e,t){var i=this;Object(o["b"])({Id:e}).then((function(e){i.editForm=e.data})),Object(l["d"])({}).then((function(e){i.ProductList=e.data})),this.ProductIds=JSON.parse(t),this.editForm.Id=e,this.editLevelVisible=!0},handleEdit:function(){var e=this,t=JSON.stringify(this.ProductIds);this.editForm.ProductIds=t,Object(o["c"])(this.editForm).then((function(t){2e4==t.code&&(e.$message({message:"预约等级已更新",type:"success"}),e.init(),e.ProductIds=[],e.editLevelVisible=!1)}))},add:function(){var e=this;Object(l["d"])({}).then((function(t){e.ProductList=t.data})),this.addLevelVisible=!0},handleAdd:function(){var e=this,t=JSON.stringify(this.ProductIds);this.addForm.ProductIds=t,console.log(this.addForm),Object(o["a"])(this.addForm).then((function(t){2e4==t.code&&(e.$message({message:"产品已添加",type:"success"}),e.init(),e.ProductIds=[],e.addLevelVisible=!1)}))}}},c=d,u=i("6691"),m=Object(u["a"])(c,n,a,!1,null,null,null);t["default"]=m.exports},6724:function(e,t,i){"use strict";i("8d41");var n="@@wavesContext";function a(e,t){function i(i){var n=Object.assign({},t.value),a=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),o=a.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var l=o.getBoundingClientRect(),r=o.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":(r=document.createElement("span"),r.className="waves-ripple",r.style.height=r.style.width=Math.max(l.width,l.height)+"px",o.appendChild(r)),a.type){case"center":r.style.top=l.height/2-r.offsetHeight/2+"px",r.style.left=l.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(i.pageY-l.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(i.pageX-l.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=a.color,r.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=i:e[n]={removeHandle:i},i}var o={bind:function(e,t){e.addEventListener("click",a(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[n].removeHandle,!1),e.addEventListener("click",a(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[n].removeHandle,!1),e[n]=null,delete e[n]}},l=function(e){e.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(l)),o.install=l;t["a"]=o},"8d41":function(e,t,i){},aede:function(e,t,i){},c4c8:function(e,t,i){"use strict";i.d(t,"d",(function(){return a})),i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return l})),i.d(t,"c",(function(){return r}));var n=i("b775");function a(e){return Object(n["a"])({url:"/product/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/product/add",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/product/edit",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/product/get",method:"get",params:e})}},c7a8:function(e,t,i){"use strict";i.d(t,"d",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return l})),i.d(t,"a",(function(){return r}));var n=i("b775");function a(e){return Object(n["a"])({url:"/plan/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/plan/detail",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/plan/edit",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/plan/add",method:"post",data:e})}}}]);